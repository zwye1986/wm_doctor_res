<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.pinde.sci.dao.jszy.JszyResUserBalckListExtMapper">

<select id="selectBlackUser" parameterType="java.util.Map"  resultMap="com.pinde.core.common.sci.dao.JsresUserBalcklistMapper.BaseResultMap" >
		select

		<include refid="com.pinde.core.common.sci.dao.JsresUserBalcklistMapper.Base_Column_List" />
    from JSRES_USER_BALCKLIST
		where record_status='Y'
		and (
			0=1
			<if test="userFlow!=''and userFlow!=null">
				or USER_FLOW= #{userFlow}
			</if>
			<if test="userCode!=''and userCode!=null">
				or USER_CODE= #{userCode}
			</if>
			<if test="userEmail!=''and userEmail!=null">
				or USER_EMAIL= #{userEmail}
			</if>
			<if test="idNo!=''and idNo!=null">
				or ID_NO= #{idNo}
			</if>
			<if test="userPhone!=''and userPhone!=null">
				or USER_PHONE= #{userPhone}
			</if>
		)
</select>
	<select id="selectBlackUserOfAll" parameterType="java.util.Map"  resultMap="com.pinde.core.common.sci.dao.JsresUserBalcklistMapper.BaseResultMap" >
		select

		<include refid="com.pinde.core.common.sci.dao.JsresUserBalcklistMapper.Base_Column_List" />
        from JSRES_USER_BALCKLIST
		where
		0=1
		<if test="userFlow!=''and userFlow!=null">
			or USER_FLOW= #{userFlow}
		</if>
		<if test="userCode!=''and userCode!=null">
			or USER_CODE= #{userCode}
		</if>
		<if test="userEmail!=''and userEmail!=null">
			or USER_EMAIL= #{userEmail}
		</if>
		<if test="idNo!=''and idNo!=null">
			or ID_NO= #{idNo}
		</if>
		<if test="userPhone!=''and userPhone!=null">
			or USER_PHONE= #{userPhone}
		</if>
	</select>
<select id="selectBlack" resultMap="com.pinde.core.common.sci.dao.JsresUserBalcklistMapper.BaseResultMap" >
	select <include refid="com.pinde.core.common.sci.dao.JsresUserBalcklistMapper.Base_Column_List" />
    from JSRES_USER_BALCKLIST
</select>
<select id="selectByIdNo" parameterType="string" resultMap="com.pinde.core.common.sci.dao.JsresUserBalcklistMapper.BaseResultMap" >
	select <include refid="com.pinde.core.common.sci.dao.JsresUserBalcklistMapper.Base_Column_List" />
    from JSRES_USER_BALCKLIST
	where ID_NO= #{userIdNo}
</select>
	<select id="searchInfo" parameterType="java.util.Map"  resultMap="com.pinde.core.common.sci.dao.JsresUserBalcklistMapper.BaseResultMap" >
		select a.*
        from JSRES_USER_BALCKLIST a
			left join res_doctor rd on a.user_flow = rd.doctor_flow
		where a.record_status='Y'
		<if test="jsresUserBalcklist.sessionNumber!=''and jsresUserBalcklist.sessionNumber!=null">
			and a.session_number= #{jsresUserBalcklist.sessionNumber}
		</if>
		<if test="jsresUserBalcklist.orgFlow!=''and jsresUserBalcklist.orgFlow!=null">
			and a.org_flow= #{jsresUserBalcklist.orgFlow}
		</if>
		<if test="jsresUserBalcklist.userName!=''and jsresUserBalcklist.userName!=null">
			and a.user_name like CONCAT(CONCAT('%', #{jsresUserBalcklist.userName}),'%')
		</if>
		<if test="jsresUserBalcklist.trainingSpeName!=''and jsresUserBalcklist.trainingSpeName!=null">
			and a.training_spe_name like CONCAT(CONCAT('%', #{jsresUserBalcklist.trainingSpeName}),'%')
		</if>
		<if test="docTypeList!=null and docTypeList.size>0">
			and rd.DOCTOR_TYPE_ID in
			<foreach collection="docTypeList" open="(" separator="," close=")" item="item">#{item}</foreach>
		</if>
		<if test="orgFlowList!=''and orgFlowList.size>0">
			and a.org_flow in
			<foreach collection="orgFlowList" open="(" separator="," close=")" item="item">#{item}</foreach>
		</if>
		order by a.create_time desc
	</select>
</mapper>
