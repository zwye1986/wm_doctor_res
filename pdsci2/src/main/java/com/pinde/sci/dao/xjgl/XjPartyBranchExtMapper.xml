<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.pinde.sci.dao.xjgl.XjPartyBranchExtMapper">
    <resultMap id="extMap" type="com.pinde.sci.model.xjgl.XjEduUserExt"
               extends="com.pinde.sci.dao.base.EduUserMapper.ResultMapWithBLOBs">
        <association property="sysUser" column="user_flow"
                     resultMap="com.pinde.sci.dao.base.SysUserMapper.BaseResultMap"/>
    </resultMap>
    <select id="querypartyMembers" parameterType="java.util.Map" resultMap="extMap">
        select su.user_flow,su.user_code,su.user_name,eu.sid,eu.first_teacher,eu.second_teacher
            ,su.id_no,su.sex_id,su.sex_name,su.NATION_ID,su.nation_name,su.NATIVE_PLACE_PROV_ID
            ,su.native_place_prov_name,su.NATIVE_PLACE_CITY_ID,su.native_place_city_name
            ,su.USER_BIRTHDAY,eu.PERIOD,su.CREATE_TIME
            ,eu.first_teacher_flow,eu.second_teacher_flow
            ,eu.major_id,eu.major_name,su.politics_status_id,su.politics_status_name
            ,su.party_branch_id,su.party_branch_name,eu.content
        from sys_user su
        left join edu_user eu
        on su.user_flow=eu.user_flow
        where su.record_status='Y'
        and eu.record_status='Y'
        and su.POLITICS_STATUS_ID='01'
        <if test="sid!=null and sid!=''">
            <bind name="eusid" value="'%'+sid+'%'"/>
            and eu.sid like #{eusid}
        </if>
        <if test="userName!=null and userName!=''">
            <bind name="name" value="'%'+userName+'%'"/>
            and su.user_name like #{name}
        </if>
        <if test="majorId!=null and majorId!=''">
            and eu.major_id= #{majorId}
        </if>
        <if test="partyBranchId!=null and partyBranchId!=''">
            and su.party_branch_id= #{partyBranchId}
        </if>
        <if test="userFlow!=null and userFlow!=''">
            and su.user_flow= #{userFlow}
        </if>
        <if test="isRelationInto!=null and isRelationInto!=''">
        </if>
        order by su.CREATE_TIME desc
    </select>
</mapper>